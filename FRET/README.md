## Instructions to organize your FRET data
This organization of the data was performed using a CLARIOstar plate reader. 


## Excel files from the plate reader
All of your data is highly recommended to be organized as I will explain below.

When you have finished obtaining all of your data from the plate reader CLARIOstar, you will
obtain an EXCEL file that must show the following information:

-----------------------------------------------------
#### User: USER													
#### Path: C:\Program Files (x86)\BMG\CLARIOstar\User\Data													
#### Test ID: 454													
#### Test Name: IDPbiosensorsG													
#### Date: 6/16/2022													
#### Time: 7:30:57 PM													
#### Fluorescence (FI) spectrum													
													
													
#### Well		G01	G02	G03	G04	G05	G06	G07	G08	G09	G10	G11	G12
#### Content	Wavelength [nm]	Sample X1	Sample X2	Sample X3	Sample X4	Sample X5	Sample X6	Sample X7	Sample X8	Sample X9	Sample X10	Sample X11	Sample X12
#### Raw Data (Em Spectrum)	460	14713	13724	14259	13579	14337	13201	11391	11334	11955	11723	11861	11813
#### Raw Data (Em Spectrum)	461	16040	15713	15329	14960	14732	14599	13979	13234	13315	13451	13538	13219
-----------------------------------------------------

I recommend that when you download the EXCEL file from the plate reader, do not move the
data, It is 

a. do not erase any information
b. do not erase any name in the file
c. maintain the row and columns that appear in the file
d. be sure that the first sheet of the file corresponds to the previous data
e. the name "Well" must appear in the ten (10) row (this is important)


## Organization of the Excel files on your computer
It must be important to maintain the next order.

These scripts apply to a FRET experiment when you use the next 
NaCl concentrations:

0, 200, 400, 600, 800, 1000, 1500

The concentrations 0, 200, 400, and 600 will be used in a 96-well plate, and the
next concentrations 0, 800, 1000, and 1500 in another 96-well plate. Considering this, 
you will have two tests for each well plate. 

The Excel file containing the data of each well plate must be saved in the 
computer with a unique name. For the first group of concentration (0, 200, 400, 600)
use the name "1", and for the others (0, 800, 1000, 1500) use "2". 

The two Excel files generated for the complete range of NaCl concentrations must be
saved in a specific folder named with the name of your construct. I recommend using
a short name without a special character (avoid using -!"Â·$%&/.,). 

The previous steps must be repeated with all of your constructs. 



## The R scripts to process FRET data
Scripts to generate all the data related to FRET experiments. There are
four R scripts needed for the processing of the FRET data. 

The name of the scripts is the next:

1. FRET.data
2. FRET.spectrum
3. FRET.boxplot
4. FRET.delta

The steps to execute each script are explained below.




## FRET.data file
First, you need to run the script called FRET.data, 
which consists of a function called FRRET.data. This function
has two necessary arguments and five optional arguments. 

The arguments are:

1. dir.input: the directory of all your raw FRET data (string argument)
2. dir.output: the directory to save all the data processed (string argument)
3. isosbestic: the isosbestic point of your FRET pair (numeric argument)
3. em.min: minimum emission fluorescence that you chose in the plate reader (numeric argument)
4. em.max: maximum emission fluorescence that you chose in the plate reader (numeric argument)
5. DxAm: emission fluorescence of your acceptor protein (numeric argument)
6. DxDm: emission fluorescence of your donor protein (numeric argument)

You need to specify the a and b arguments; the others are optional and depend on the
fluorescence proteins that you chose. 

As an important thing, the script FRET.data generates a new folder called FRET in the output 
directory that you specify. Inside the FRET folder generated by the script, you will 
see different subfolders with the name you put to your constructs' folders in
the directory input. Finally, two more subfolders will be inside each subfolder: **PLOTS** and **DATA**. 

1. PLOTS: individual spectrum for each replicate and boxplot with all of the biological replicates
2. DATA: CSV files with the data of the plate reader processed to generate spectrum and another CSV file 
containing the data to generate the boxplot




## FRET.spectrum file
This script is used to generate the spectrum of all of the replicates in the FRET experiment. It
generates three plots with a blue palette colour to identify the salt concentration. The concentration
will appear as a legend on the right side of the plot and will be displayed in Molar units. 

This script consists of a function called FRET.spectrum that has one necessary argument and six
optional arguments. 

The arguments are:

1. dir.fret: the directory of the FRET folder generated with the FRET.data script (string argument)
2. format.plot: the extension of the plots. You can choose "pdf" or "png" (string argument)
3. ymax_name: related to the y-axis. Indicates the high of the name of your construct displayed in the plot (numeric argument)
4. ymax_axis: indicates the maximum range of the y-axis (depends on the FRET response) (numeric argument)
5. ymix_axis: indicates the minimum range of the y-axis (depends on the FRET response) (numeric argument)
6. yaxis_ticks: the interval of the y-axis to show in your plot (numeric argument)
7. bios_name: add the name of the construct in the plot. If you want your name, change it to FALSE (logical argument)

All of the spectra will be saved in the PLOTS subfolder generated when you ran the FRET.data script. 




## FRET.boxplot file
This script is used to generate the boxplot of each construct that you read in the plate reader. It 
generates one boxplot with the biological replicates, and also will add the statistical analysis
to see if each salt concentration has a significant response related to the DxAm/DxDm normalized ratio.

The script consists of a function called FRET.boxplot that has one necessary argument and seven 
optional arguments. 

The arguments are similar to the FRET.spectrum file, but with an additional argument:

1. dir.fret: the directory of the FRET folder generated with the FRET.data script (string argument)
2. format.plot: the extension of the plots. You can choose "pdf" or "png" (string argument)
4. ymax_text: indicates the high of the statistical values (asterisks) to show in the plot (depends on the FRET response) (numeric argument)
3. ymax_name: related to the y-axis. Indicates the high of the name of your construct displayed in the plot (numeric argument)
4. ymax_axis: indicates the maximum range of the y-axis (depends on the FRET response) (numeric argument)
5. ymix_axis: indicates the minimum range of the y-axis (depends on the FRET response) (numeric argument)
6. yaxis_ticks: the interval of the y-axis to show in your plot (numeric argument)
7. bios_name: add the name of the construct in the plot. If you want your name, change it to FALSE (logical argument)

All spectra will be saved in the PLOTS subfolder generated when you ran the FRET.data script. 




## FRET.delta file
This script is used to generate a scatterplot with its standard deviation. It generates a plot
with two axes. The x-axis is called delta FRET and the y-axis is the name of each construct you 
used in the FRET experiment. 

The script consists of a function called FRET.delta that has one necessary argument and five 
optional arguments. 

The arguments are:

1. dir.fret: the directory of the FRET folder generated with the FRET.data script (string argument)
2. format.plot: the extension of the plots. You can choose "pdf" or "png" (string argument)
3. xaxis_max: the maximum range of the x-axis to show in your plot (numeric argument)
4. xaxis_min: the minimum range of the x-axis to show in your plot (numeric argument)
5. width: the width of the pdf or png image. Related to the saving process in your computer (numeric argument)
6. height: the height of the pdf or png image. Related to the saving process in your computer (numeric argument)

This final script will create a PDF or PNG image of your plot with the dimensions you specify,
and a CSV file containing the name of each construct, the value of delta FRET, and the standard
deviation of your data. The files will be saved inside the FRET folder named "all_biosensors".




MIT License

Copyright (c) 2023 Cesar Ponce-Diego

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.




